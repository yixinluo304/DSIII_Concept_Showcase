"0",""
"0","library(shiny)"
"2","Warning: package ‘shiny’ was built under R version 4.3.3"
"0","library(leaflet)"
"0","library(sf)"
"0","library(dplyr)"
"0",""
"0","# Combine all GeoJSON files into one sf object"
"0","# Ensure geojson_list is already loaded and contains valid sf objects"
"0","combined_geojson <- do.call(rbind, geojson_list)"
"0",""
"0","# Define UI"
"0","ui <- fluidPage("
"0","  # Application title"
"0","  titlePanel(""Map of Projects""),"
"0","  "
"0","  sidebarLayout("
"0","    sidebarPanel("
"0","      selectInput(inputId = ""region_filter"","
"0","                  label = ""Filter by Recipient Region:"","
"0","                  choices = sort(unique(combined_geojson$`Recipient Region`)),"
"0","                  selected = NULL,"
"0","                  multiple = TRUE)"
"0","    ),"
"0","    mainPanel("
"0","      # Leaflet output"
"0","      leafletOutput(""map"", height = ""700px"")"
"0","    )"
"0","  )"
"0",")"
"0",""
"0","# Define server logic"
"0","server <- function(input, output, session) {"
"0","  "
"0","  # Reactive filtered data"
"0","  filtered_data <- reactive({"
"0","    if (is.null(input$region_filter) || length(input$region_filter) == 0) {"
"0","      combined_geojson  # Return all data if no filter selected"
"0","    } else {"
"0","      combined_geojson %>%"
"0","        filter(`Recipient Region` %in% input$region_filter)"
"0","    }"
"0","  })"
"0","  "
"0","  # Render the Leaflet map"
"0","  output$map <- renderLeaflet({"
"0","    leaflet(data = filtered_data()) %>%"
"0","      addProviderTiles(""OpenStreetMap"") %>%"
"0","      addPolygons("
"0","        color = ""darkgreen"","
"0","        fillColor = ""lightgreen"","
"0","        fillOpacity = 0.6,"
"0","        popup = ~paste("
"0","          ""<strong>Title:</strong>"", Title, ""<br>"","
"0","          ""<strong>Amount:</strong>"", Amount..Constant.USD.2021., ""<br>"","
"0","          ""<strong>Status:</strong>"", Status, ""<br>"","
"0","          ""<strong>Narrative:</strong>"", `Location Narrative`"
"0","        )"
"0","      )"
"0","  })"
"0","}"
"0",""
"0","# Run the application "
"0","shinyApp(ui = ui, server = server)"
"2","
Listening on http://127.0.0.1:6486
"
